

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/favicon.png">
  <link rel="icon" href="/favicon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#42826d99">
  <meta name="author" content="落花生">
  <meta name="keywords" content=" ">
  
    <meta name="description" content="基于SQL Service 内容来源于我老师的ppt，仅作为学习交流与参考">
<meta property="og:type" content="article">
<meta property="og:title" content="SQL services基础">
<meta property="og:url" content="https://dbin.top/2021/09/27/SQL/SQL%E5%9F%BA%E7%A1%80/index.html">
<meta property="og:site_name" content="唯落花生">
<meta property="og:description" content="基于SQL Service 内容来源于我老师的ppt，仅作为学习交流与参考">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-09-27T01:42:22.000Z">
<meta property="article:modified_time" content="2022-02-06T14:34:11.712Z">
<meta property="article:author" content="落花生">
<meta property="article:tag" content="SQL">
<meta name="twitter:card" content="summary_large_image">
  
  
  
  <title>SQL services基础 - 唯落花生</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  



  
<link rel="stylesheet" href="//at.alicdn.com/t/font_2648851_os7f9jxepo.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"dbin.top","root":"/","version":"1.9.0","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":"uKOOPQNyiz8V0YbQ26C0rPDJ-MdYXbMMI","app_key":"VqFAs3nVmnRh60W7DUaprXW1","server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>

  
<meta name="generator" content="Hexo 6.2.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>唯落花生</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-guidang"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-fenlei"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-biaoqian_huaban1"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                友链
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('http://dbins.gitee.io/image/background/backgroundwhite.jpg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="SQL services基础"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2021-09-27 09:42" pubdate>
          2021年9月27日 上午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          6.6k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          22 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">SQL services基础</h1>
            
            <div class="markdown-body">
              
              <blockquote>
<p>基于SQL Service</p>
<p>内容来源于我老师的ppt，仅作为学习交流与参考</p>
</blockquote>
<span id="more"></span>

<p>tips: 下篇<a href="/2021/10/14/SQL/SQL%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/">SQL 基础语法</a>)</p>
<h2 id="关于Microsoft-SQL-sever"><a href="#关于Microsoft-SQL-sever" class="headerlink" title="关于Microsoft SQL sever"></a>关于Microsoft SQL sever</h2><h3 id="数据库文件"><a href="#数据库文件" class="headerlink" title="数据库文件"></a>数据库文件</h3><p>数据库文件是存放数据库数据和数据库对象的文件。<br>一个数据库可以有一个或多个数据库文件，一个数据库文件只属于一个数据库。<br>有一个文件被定义为主数据库文件 。扩展名为.mdf 。只能有一个主数据库文件 。<br>次数据库文件， 扩展名为.ndf 。</p>
<p>单行注释： <code>-- 注释内容</code>  ，多行注释：<code>/* 注释内容 */</code></p>
<blockquote>
<p>tips:以下代码关键词等不区分大小写。</p>
</blockquote>
<h2 id="对数据库的操作"><a href="#对数据库的操作" class="headerlink" title="对数据库的操作"></a>对数据库的操作</h2><h3 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h3><div class="code-wrapper"><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> 数据库名
<span class="token keyword">ON</span> <span class="token keyword">PRIMARY</span>
<span class="token punctuation">(</span>
    <span class="token comment">--创建数据库文件</span>
	NAME <span class="token operator">=</span> 逻辑名<span class="token punctuation">,</span>
	FILENAME<span class="token operator">=</span><span class="token string">'路径+文件名+.MDF'</span><span class="token punctuation">,</span>SIZE <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token comment">/*如：D:\SQL2014\DataBase\ToyUniverse_Data.MDF*/</span> 
	MAXSIZE <span class="token operator">=</span> UNLIMITED<span class="token punctuation">,</span> <span class="token comment">--大小限制单位MB 无限制</span>
	FILEGROWTH <span class="token operator">=</span> <span class="token number">5</span> <span class="token comment">--文件增长 每次增长 5MB</span>
<span class="token punctuation">)</span>
LOG <span class="token keyword">ON</span>
<span class="token punctuation">(</span>
    <span class="token comment">--创建事务日志文件</span>
	NAME <span class="token operator">=</span> 逻辑名<span class="token punctuation">,</span> 
	FILENAME<span class="token operator">=</span><span class="token string">'路径+文件名+.LDF'</span><span class="token punctuation">,</span>SIZE <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span>
	MAXSIZE <span class="token operator">=</span> <span class="token number">2000</span><span class="token punctuation">,</span>
	FILEGROWTH <span class="token operator">=</span> <span class="token number">10</span><span class="token operator">%</span> 
<span class="token punctuation">)</span> 
</code></pre></div>

<h3 id="为数据库添加一个数据库文件和事务日志文件"><a href="#为数据库添加一个数据库文件和事务日志文件" class="headerlink" title="为数据库添加一个数据库文件和事务日志文件"></a>为数据库添加一个数据库文件和事务日志文件</h3><div class="code-wrapper"><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">DATABASE</span> 数据库名
<span class="token keyword">ADD</span> <span class="token keyword">FILE</span>
<span class="token punctuation">(</span>
	NAME <span class="token operator">=</span> 逻辑名称<span class="token punctuation">,</span>
	FILENAME<span class="token operator">=</span><span class="token string">'路径+文件名+.MDF.NDF'</span><span class="token punctuation">,</span><span class="token comment">--</span>
	SIZE <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span>
	MAXSIZE <span class="token operator">=</span> UNLIMITED<span class="token punctuation">,</span>
	FILEGROWTH <span class="token operator">=</span> <span class="token number">5</span>
<span class="token punctuation">)</span>
GO
<span class="token keyword">ALTER</span> <span class="token keyword">DATABASE</span> ToyUniverse
<span class="token keyword">ADD</span> LOG <span class="token keyword">FILE</span>
<span class="token punctuation">(</span>
	NAME <span class="token operator">=</span> 逻辑名称<span class="token punctuation">,</span>
	FILENAME<span class="token operator">=</span><span class="token string">'路径+文件名+.MDF.LDF'</span><span class="token punctuation">,</span>
	SIZE <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span>
	MAXSIZE <span class="token operator">=</span> <span class="token number">2000</span><span class="token punctuation">,</span>
	FILEGROWTH <span class="token operator">=</span> <span class="token number">10</span><span class="token operator">%</span>
<span class="token punctuation">)</span>
GO </code></pre></div>

<h3 id="修改数据库数据文件name1的属性"><a href="#修改数据库数据文件name1的属性" class="headerlink" title="修改数据库数据文件name1的属性"></a>修改数据库数据文件name1的属性</h3><div class="code-wrapper"><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">DATABASE</span> 数据库名
<span class="token keyword">MODIFY</span>  <span class="token keyword">FILE</span>
<span class="token punctuation">(</span>
	NAME <span class="token operator">=</span> name1<span class="token punctuation">,</span>
	SIZE <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span><span class="token comment">--修该大小等。</span>
	MAXSIZE <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">,</span>
	FILEGROWTH <span class="token operator">=</span> <span class="token number">10</span>
<span class="token punctuation">)</span>
GO</code></pre></div>

<h2 id="对表的基本操作"><a href="#对表的基本操作" class="headerlink" title="对表的基本操作"></a>对表的基本操作</h2><h3 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3><h4 id="数据类型分类"><a href="#数据类型分类" class="headerlink" title="数据类型分类"></a>数据类型分类</h4><table>
<thead>
<tr>
<th>数据类型分类</th>
<th>数据类型</th>
<th>基本目的</th>
</tr>
</thead>
<tbody><tr>
<td>精确数值</td>
<td><code>BIT</code> 、 <code>INT</code> 、 <code>SMALLINT</code> 、 <code>TINYINT</code> 、 <code>BIGINT </code> 、 <code>DECIMAL（p,s）</code> 、 <code>NUMERIC （p,s）</code></td>
<td>存储带或不带小数的精确数值</td>
</tr>
<tr>
<td>近似数值</td>
<td><code>FLOAT(p)</code> 、 <code>REAL </code></td>
<td>存储带小数或不带小数的数值</td>
</tr>
<tr>
<td>货币</td>
<td><code>MONEY</code> 、 <code>SMALLMONEY  </code></td>
<td>存储带4位小数位的数值，专门用于货币值。</td>
</tr>
<tr>
<td>日期和时间</td>
<td><code>DATE</code> 、 <code>DATETIMEOFFSET</code> 、 <code>DATETIME2</code> 、 <code>SMALLDATETIME</code> 、 <code>DATETIME</code> 、 <code>TIME</code></td>
<td>存储时间和日期信息</td>
</tr>
<tr>
<td>字符串</td>
<td><code>CHAR(n)</code> 、 <code>NCHAR(n)</code> 、 <code>VARCHAR(n)</code> 、 <code>VARCHAR(max)</code> 、 <code>NVARCHAR(n)</code> 、 <code>NVARCHAR(max) </code> 、 <code>TEXT</code> 、 <code>NTEXT</code></td>
<td>存储基于可变长度的字符的值</td>
</tr>
<tr>
<td>二进制</td>
<td><code>BINARY(n)</code> 、 <code>VARBINARY(n)</code> 、 <code>VARBINARY(max)</code> 、 <code>IMAGE</code></td>
<td>存储二进制表示数据</td>
</tr>
<tr>
<td>特定数据类型</td>
<td><code>CURSOR</code> 、 <code>TIMESTAMP</code> 、 <code>HIERARCHYID</code> 、 <code>UNIQUEIDENTIFIER</code> 、 <code>SQL_VARIANT</code> 、 <code>XML</code> 、 <code>TABLE</code> 、 <code>GEOGRAPHY</code> 、 <code>GEOMETRY</code></td>
<td>专门处理的复杂的数据类型</td>
</tr>
</tbody></table>
<h4 id="精确数值类型"><a href="#精确数值类型" class="headerlink" title="精确数值类型"></a>精确数值类型</h4><table>
<thead>
<tr>
<th>数据类型</th>
<th>存储长度</th>
<th>取值范围</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>BIT</code></td>
<td>1B</td>
<td>0或者1</td>
<td>如果输入0或1以外的值，将被视为1。</td>
</tr>
<tr>
<td><code>INT</code></td>
<td>4B</td>
<td>-2^31 ～2^31-1</td>
<td>正负整数</td>
</tr>
<tr>
<td><code>SMALLINT</code></td>
<td>2B</td>
<td>-32768～32767</td>
<td>正负整数</td>
</tr>
<tr>
<td><code>TINYINT</code></td>
<td>1B</td>
<td>0～255</td>
<td>正整数</td>
</tr>
<tr>
<td><code>BIGINT</code></td>
<td>8B</td>
<td>-2^63 ～2^63-1</td>
<td>大范围的正负整数</td>
</tr>
<tr>
<td><code>DECIMAL（p,s）</code></td>
<td>5～17B</td>
<td>- 10^38 +1 ～ 10^38  - 1</td>
<td>最大可存储38位十进制数</td>
</tr>
<tr>
<td><code>NUMERIC（p,s）</code></td>
<td>5～17B</td>
<td>- 10^38 +1 ～ 10^38  - 1</td>
<td>与DECIMAL等价</td>
</tr>
</tbody></table>
<h4 id="近似数值类型"><a href="#近似数值类型" class="headerlink" title="近似数值类型"></a>近似数值类型</h4><table>
<thead>
<tr>
<th>数据类型</th>
<th>存储长度</th>
<th>取值范围</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>FLOAT(p)</code></td>
<td>4B或8B</td>
<td>1.79E + 308～-2.23E  - 308、0和 2.23E – 308～1.79E  + 308</td>
<td>存储大型浮点数</td>
</tr>
<tr>
<td><code>REAL</code></td>
<td>4B</td>
<td>-3.40E + 38 至 -1.18E  - 38、0 和1.18E - 38 至 3.40E + 38</td>
<td>SQL-92标准已被float替换</td>
</tr>
</tbody></table>
<h4 id="货币类型"><a href="#货币类型" class="headerlink" title="货币类型"></a>货币类型</h4><table>
<thead>
<tr>
<th>数据类型</th>
<th>存储长度</th>
<th>取值范围</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>MONEY</code></td>
<td>8B</td>
<td>-922,337,203,685,477.5808～ 922,337,203,685,477.5807</td>
<td>存储大型货币值</td>
</tr>
<tr>
<td><code>SMALLMONEY</code></td>
<td>4B</td>
<td>-214,748.3648～214,748.3647</td>
<td>存储小型货币值</td>
</tr>
</tbody></table>
<h4 id="日期时间类型"><a href="#日期时间类型" class="headerlink" title="日期时间类型"></a>日期时间类型</h4><table>
<thead>
<tr>
<th>数据类型</th>
<th>存储长度</th>
<th>取值范围</th>
<th>精度</th>
</tr>
</thead>
<tbody><tr>
<td><code>DATE</code></td>
<td>3B</td>
<td>0001-01-01 到 9999-12-31</td>
<td>1day</td>
</tr>
<tr>
<td><code>TIME</code></td>
<td>3B~5B</td>
<td>00:00:00.0000000 到 23:59:59.9999999</td>
<td>100ns</td>
</tr>
<tr>
<td><code>SMALLDATETIME</code></td>
<td>4B</td>
<td>1900-01-01 到 2079-06-06</td>
<td>1min</td>
</tr>
<tr>
<td><code>DATETIME</code></td>
<td>8B</td>
<td>1753-01-01 到 9999-12-31</td>
<td>0.00333s</td>
</tr>
<tr>
<td><code>DATETIME2</code></td>
<td>6B~8B</td>
<td>0001-01-01 00:00:00.0000000 到 9999-12-31 23:59:59.9999999</td>
<td>100ns</td>
</tr>
<tr>
<td><code>DATETIMEOFFSET</code></td>
<td>8B~10B</td>
<td>0001-01-01 00:00:00.0000000 到 9999-12-31 23:59:59.9999999（以世界协调时间（UTC）表示）</td>
<td>100ns</td>
</tr>
</tbody></table>
<h4 id="字符类型"><a href="#字符类型" class="headerlink" title="字符类型"></a>字符类型</h4><table>
<thead>
<tr>
<th>数据类型</th>
<th>存储长度</th>
<th>取值范围</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>CHAR(n)</code></td>
<td>1B～8000B</td>
<td>最多8000个字符</td>
<td>固定长度ANSI数据类型</td>
</tr>
<tr>
<td><code>NCHAR(n)</code></td>
<td>2B～8000B</td>
<td>最多4000个字符</td>
<td>固定长度Unicode数据类型</td>
</tr>
<tr>
<td><code>VARCHAR(n)</code></td>
<td>1B～8000B</td>
<td>最多8000个字符</td>
<td>可变长度ANSI数据类型</td>
</tr>
<tr>
<td><code>VARCHAR(max)</code></td>
<td>最大2G</td>
<td>最多1 073 741 824个字符</td>
<td>可变长度ANSI数据类型</td>
</tr>
<tr>
<td><code>NVARCHAR(n)</code></td>
<td>2B～8000B</td>
<td>最多4000个字符</td>
<td>可变长度Unicode数据类型</td>
</tr>
<tr>
<td><code>NVARCHAR(max)</code></td>
<td>最大2G</td>
<td>最多536 870 912个字符</td>
<td>可变长度Unicode数据类型</td>
</tr>
<tr>
<td><code>TEXT</code></td>
<td>最大2G</td>
<td>最多1 073 741 824个字符</td>
<td>可变长度ANSI数据类型</td>
</tr>
<tr>
<td><code>NTEXT</code></td>
<td>最大2G</td>
<td>最多536 870 912个字符</td>
<td>可变长度Unicode数据类型</td>
</tr>
</tbody></table>
<h4 id="二进制类型"><a href="#二进制类型" class="headerlink" title="二进制类型"></a>二进制类型</h4><table>
<thead>
<tr>
<th>数据类型</th>
<th>存储长度</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>BINARY(n)</code></td>
<td>1B～8000B</td>
<td>存储固定大小的二进制数据</td>
</tr>
<tr>
<td><code>VARBINARY(n)</code></td>
<td>1B～8000B</td>
<td>存储可变大小的二进制数据</td>
</tr>
<tr>
<td><code>ARBINARY(max)</code></td>
<td>最大2G</td>
<td>存储可变大小的二进制数据</td>
</tr>
<tr>
<td><code>IMAGE</code></td>
<td>最大2G</td>
<td>存储可变大小的二进制数据</td>
</tr>
</tbody></table>
<h3 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h3><h4 id="一般表"><a href="#一般表" class="headerlink" title="一般表"></a>一般表</h4><div class="code-wrapper"><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> 表名<span class="token punctuation">(</span>
    test1 <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>	<span class="token comment">--列(属性)名 数据类型,</span>
    test2 <span class="token keyword">int</span><span class="token punctuation">,</span>		<span class="token comment">--列(属性)名 数据类型,</span>
    test3 <span class="token keyword">double</span>
<span class="token punctuation">)</span></code></pre></div>

<h4 id="表中有计算得出值的"><a href="#表中有计算得出值的" class="headerlink" title="表中有计算得出值的"></a>表中有计算得出值的</h4><div class="code-wrapper"><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> 表名<span class="token punctuation">(</span>
    test1 <span class="token keyword">float</span><span class="token punctuation">,</span>
    test2 <span class="token keyword">float</span><span class="token punctuation">,</span>
    test3 <span class="token keyword">as</span> <span class="token punctuation">(</span>test1<span class="token operator">*</span>test2<span class="token punctuation">)</span> persisted <span class="token comment">--test3由计算得出</span>
<span class="token punctuation">)</span></code></pre></div>

<h4 id="添加列"><a href="#添加列" class="headerlink" title="添加列"></a>添加列</h4><div class="code-wrapper"><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">add</span> 列名 数据类型
<span class="token comment">--如 alter table 表名 add test4 float</span></code></pre></div>

<h4 id="修改数据类型"><a href="#修改数据类型" class="headerlink" title="修改数据类型"></a>修改数据类型</h4><div class="code-wrapper"><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">alter</span> <span class="token keyword">column</span> 列名 数据类型
<span class="token comment">--如 alter table 表名 alter column test4 varchar(1000)</span></code></pre></div>

<h4 id="删除列"><a href="#删除列" class="headerlink" title="删除列"></a>删除列</h4><div class="code-wrapper"><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">drop</span> <span class="token keyword">column</span> 列名
<span class="token comment">--如 alter table 表名 drop column test4</span></code></pre></div>

<h3 id="删除表"><a href="#删除表" class="headerlink" title="删除表"></a>删除表</h3><div class="code-wrapper"><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">drop</span> <span class="token keyword">table</span> 表名</code></pre></div>

<h2 id="数据库完整性"><a href="#数据库完整性" class="headerlink" title="数据库完整性"></a>数据库完整性</h2><p>数据库中的数据是从外界输入的，而数据的输入由于种种原因，会发生输入无效或错误信息。保证输入的数据符合规定，成为了数据库系统，尤其是多用户的关系数据库系统首要关注的问题。</p>
<div class="code-wrapper"><pre class="language-none"><code class="language-none">实体完体性
参照完整性
域完整性
用户自定义完整性。</code></pre></div>

<h3 id="实体完整性"><a href="#实体完整性" class="headerlink" title="实体完整性"></a>实体完整性</h3><h4 id="依靠创建主键实现"><a href="#依靠创建主键实现" class="headerlink" title="依靠创建主键实现"></a>依靠创建主键实现</h4><div class="code-wrapper"><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> Test<span class="token punctuation">(</span>
	test1 <span class="token keyword">float</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span><span class="token comment">--primary key 将test1 列设置为主键 列级定义</span>
	test2 <span class="token keyword">float</span><span class="token punctuation">,</span>
	test3 <span class="token keyword">char</span>
<span class="token punctuation">)</span></code></pre></div>

<p>或者</p>
<div class="code-wrapper"><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> Test<span class="token punctuation">(</span>
	test1 <span class="token keyword">float</span><span class="token punctuation">,</span>
	test2 <span class="token keyword">float</span><span class="token punctuation">,</span>
	test3 <span class="token keyword">char</span><span class="token punctuation">,</span>
    <span class="token comment">--设置test1和test2为主键，只要test1与test2不同时相同就可，当然也可以只设置一个。（表级定义）设置两个及以上列为主键时应用表级约束</span>
	<span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>test1<span class="token punctuation">,</span>test2<span class="token punctuation">)</span>
<span class="token punctuation">)</span></code></pre></div>

<p>或者</p>
<div class="code-wrapper"><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> Test<span class="token punctuation">(</span>
	test1 <span class="token keyword">float</span><span class="token punctuation">,</span>
	test2 <span class="token keyword">float</span><span class="token punctuation">,</span>
	test3 <span class="token keyword">char</span><span class="token punctuation">,</span>
	<span class="token keyword">constraint</span> pktest1 <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>test1<span class="token punctuation">)</span> <span class="token comment">--表级定义，设置约束名为 pktest1</span>
<span class="token punctuation">)</span></code></pre></div>

<h4 id="添加主键"><a href="#添加主键" class="headerlink" title="添加主键"></a>添加主键</h4><p>在创建表是忘记设置主键可以添加主键</p>
<h5 id="添加约束"><a href="#添加约束" class="headerlink" title="添加约束"></a>添加约束</h5><div class="code-wrapper"><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> Test <span class="token keyword">add</span> <span class="token keyword">constraint</span> pkTest <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>test1<span class="token punctuation">)</span></code></pre></div>

<h5 id="或者之间添加主键"><a href="#或者之间添加主键" class="headerlink" title="或者之间添加主键"></a>或者之间添加主键</h5><div class="code-wrapper"><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> Test <span class="token keyword">add</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>test1<span class="token punctuation">)</span></code></pre></div>

<h5 id="删除主键"><a href="#删除主键" class="headerlink" title="删除主键"></a>删除主键</h5><p>在删除主键前，需要知道主键的约束名，通过以下代码查看</p>
<div class="code-wrapper"><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> sysobjects <span class="token keyword">where</span> parent_obj <span class="token operator">in</span><span class="token punctuation">(</span><span class="token keyword">select</span> id <span class="token keyword">from</span> sysobjects <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">'表名'</span><span class="token punctuation">)</span> <span class="token comment">--表名要打引号，查找出的约束名为name</span>
<span class="token comment">--或者</span>
<span class="token keyword">exec</span> sp_helpconstraint <span class="token variable">@objname</span><span class="token operator">=</span><span class="token string">'Test'</span> <span class="token comment">--查找出的约束名为 constraint_name,type为PRIMARY KEY</span></code></pre></div>

<p>通过上面两条语句查找到约束名</p>
<p>删除约束即可</p>
<div class="code-wrapper"><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> Test <span class="token keyword">drop</span> <span class="token keyword">constraint</span> 约束名</code></pre></div>

<h3 id="参照完整性"><a href="#参照完整性" class="headerlink" title="参照完整性"></a>参照完整性</h3><p>在关系数据库中通过外键实现参照完整性</p>
<h4 id="添加外键"><a href="#添加外键" class="headerlink" title="添加外键"></a>添加外键</h4><p>列级约束</p>
<div class="code-wrapper"><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> Tests<span class="token punctuation">(</span>
	test0 <span class="token keyword">float</span> <span class="token keyword">references</span> Test<span class="token punctuation">(</span>test1<span class="token punctuation">)</span><span class="token punctuation">,</span>
	test1 <span class="token keyword">time</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
	test2 money
<span class="token punctuation">)</span></code></pre></div>



<div class="code-wrapper"><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> Tests<span class="token punctuation">(</span>
	test0 <span class="token keyword">float</span><span class="token punctuation">,</span>
	test1 <span class="token keyword">time</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span> <span class="token comment">--设置为主键</span>
	test2 money<span class="token punctuation">,</span>
	<span class="token keyword">foreign</span> <span class="token keyword">key</span><span class="token punctuation">(</span>test0<span class="token punctuation">)</span> <span class="token keyword">references</span> Test<span class="token punctuation">(</span>test1<span class="token punctuation">)</span> <span class="token comment">--设置外键为Test 的主键test1</span>
<span class="token punctuation">)</span></code></pre></div>

<h4 id="添加外键-1"><a href="#添加外键-1" class="headerlink" title="添加外键"></a>添加外键</h4><p>在创建表时未添加外键，之后添加外键</p>
<p>如将Tests 的 test0 列设置外键，外键未Test 的test1列</p>
<div class="code-wrapper"><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> Tests 
<span class="token keyword">add</span> <span class="token keyword">constraint</span> fkTests1
<span class="token keyword">foreign</span> <span class="token keyword">key</span><span class="token punctuation">(</span>test0<span class="token punctuation">)</span> <span class="token keyword">references</span> Test<span class="token punctuation">(</span>test1<span class="token punctuation">)</span><span class="token comment">--可以不用换行用空格隔开</span></code></pre></div>

<p>或者</p>
<div class="code-wrapper"><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> Tests <span class="token keyword">add</span> <span class="token keyword">constraint</span> fkTests1 <span class="token keyword">foreign</span> <span class="token keyword">key</span><span class="token punctuation">(</span>test0<span class="token punctuation">)</span> <span class="token keyword">references</span> Test<span class="token punctuation">(</span>test1<span class="token punctuation">)</span></code></pre></div>



<h4 id="删除外键"><a href="#删除外键" class="headerlink" title="删除外键"></a>删除外键</h4><p>以下两句查找FOREIGN KEY 约束名</p>
<div class="code-wrapper"><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> sysobjects <span class="token keyword">where</span> parent_obj <span class="token operator">in</span><span class="token punctuation">(</span><span class="token keyword">select</span> id <span class="token keyword">from</span> sysobjects <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">'Tests'</span><span class="token punctuation">)</span>
<span class="token keyword">exec</span> sp_helpconstraint <span class="token variable">@objname</span><span class="token operator">=</span><span class="token string">'Tests'</span></code></pre></div>

<p>删除</p>
<div class="code-wrapper"><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> Test <span class="token keyword">drop</span> <span class="token keyword">constraint</span> 约束名</code></pre></div>

<h4 id="参照完整性的违约处理策略"><a href="#参照完整性的违约处理策略" class="headerlink" title="参照完整性的违约处理策略"></a>参照完整性的违约处理策略</h4><p>当删除外键对应的主键表的数据时，系统默认不准删除，设置相关的违约处理策略可以解决此问题</p>
<div class="code-wrapper"><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">on</span> <span class="token keyword">delete</span> <span class="token keyword">cascade</span> <span class="token comment">--级联删除</span>
<span class="token keyword">on</span> <span class="token keyword">delete</span> <span class="token keyword">no</span> <span class="token keyword">action</span> <span class="token comment">--拒绝删除</span>
<span class="token keyword">on</span> <span class="token keyword">delete</span> <span class="token keyword">update</span> <span class="token comment">--级联更新</span>
<span class="token keyword">on</span> <span class="token keyword">delete</span> <span class="token keyword">on</span> <span class="token keyword">action</span> <span class="token comment">--拒绝删除</span></code></pre></div>



<div class="code-wrapper"><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> Tests<span class="token punctuation">(</span>
	test0 <span class="token keyword">float</span> <span class="token keyword">references</span> Test<span class="token punctuation">(</span>test1<span class="token punctuation">)</span> <span class="token keyword">on</span> <span class="token keyword">delete</span> <span class="token keyword">cascade</span><span class="token punctuation">,</span><span class="token comment">--级联删除</span>
	test1 <span class="token keyword">time</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
	test2 money<span class="token punctuation">,</span>
<span class="token punctuation">)</span></code></pre></div>



<div class="code-wrapper"><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> Tests<span class="token punctuation">(</span>
	test0 <span class="token keyword">float</span> <span class="token keyword">references</span> Test<span class="token punctuation">(</span>test1<span class="token punctuation">)</span> <span class="token keyword">on</span> <span class="token keyword">update</span> <span class="token keyword">cascade</span><span class="token punctuation">,</span><span class="token comment">--级联更新</span>
	test1 <span class="token keyword">time</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
	test2 money<span class="token punctuation">,</span>
<span class="token punctuation">)</span></code></pre></div>

<p>也可进行表级定义</p>
<div class="code-wrapper"><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> Tests<span class="token punctuation">(</span>
	test0 <span class="token keyword">float</span><span class="token punctuation">,</span>
	test1 <span class="token keyword">time</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
	test2 money<span class="token punctuation">,</span>
	<span class="token keyword">foreign</span> <span class="token keyword">key</span><span class="token punctuation">(</span>test0<span class="token punctuation">)</span> <span class="token keyword">references</span> Test<span class="token punctuation">(</span>test1<span class="token punctuation">)</span> <span class="token keyword">on</span> <span class="token keyword">update</span> <span class="token keyword">cascade</span>
<span class="token punctuation">)</span></code></pre></div>

<p>在添加外键时也可以直接在添加以下语句之一语句后加设置级联更新或删除</p>
<div class="code-wrapper"><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">on</span> <span class="token keyword">update</span> <span class="token keyword">cascade</span>
<span class="token keyword">on</span> <span class="token keyword">delete</span> <span class="token keyword">cascade</span></code></pre></div>

<h3 id="域完整性"><a href="#域完整性" class="headerlink" title="域完整性"></a>域完整性</h3><p><strong>域完整性确保了只有在某一合法范围内的值才能存储到一列中。可以通过限制数据类型、值的范围和数据格式来实施域完整性。</strong></p>
<p>在SQL Server中可以通过默认（<code>DEFAULT</code>）约束、检查约束（<code>CHECK</code>）约束、非空（<code>NOT NULL</code>）约束、唯一（<code>UNIQUE</code>）约束来实施域完整性。</p>
<h4 id="default-约束"><a href="#default-约束" class="headerlink" title="default 约束"></a><code>default</code> 约束</h4><div class="code-wrapper"><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> Student<span class="token punctuation">(</span>
	id <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	names <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	sex <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">'男'</span><span class="token comment">--默认未男</span>
<span class="token punctuation">)</span></code></pre></div>

<p>添加约束,如果建表时未添加约束</p>
<div class="code-wrapper"><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> Student
<span class="token keyword">add</span> <span class="token keyword">constraint</span> 约束名 <span class="token keyword">default</span> <span class="token string">'男'</span> <span class="token keyword">for</span> sex</code></pre></div>

<p>删除约束</p>
<div class="code-wrapper"><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> Student
<span class="token keyword">drop</span> <span class="token keyword">constraint</span> defSex <span class="token comment">--约束名用前面查看主键和外键约束名的方法查看</span></code></pre></div>

<h4 id="check-约束"><a href="#check-约束" class="headerlink" title="check 约束"></a><code>check</code> 约束</h4><div class="code-wrapper"><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> Student<span class="token punctuation">(</span>
	id <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	names <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	sex <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">check</span> <span class="token punctuation">(</span>sex <span class="token operator">in</span><span class="token punctuation">(</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token string">'女'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	age <span class="token keyword">int</span> <span class="token keyword">check</span><span class="token punctuation">(</span>age<span class="token operator">>=</span><span class="token number">15</span> <span class="token operator">and</span> age <span class="token operator">&lt;=</span><span class="token number">100</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span></code></pre></div>

<p>添加和删除方法与default一样</p>
<h4 id="unique-约束"><a href="#unique-约束" class="headerlink" title="unique 约束"></a><code>unique 约束</code></h4><div class="code-wrapper"><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> Student<span class="token punctuation">(</span>
	id <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">unique</span><span class="token punctuation">,</span>
	names <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span></code></pre></div>

<p>添加和删除方法与default一样</p>
<h2 id="引索"><a href="#引索" class="headerlink" title="引索"></a>引索</h2><p>用户对数据库最频繁的操作是进行数据查询。一般情况下，数据库在进行查询操作时需要对整个表进行数据搜索。当表中的数据很多时，搜索数据就需要很长的时间，这就造成了服务器的资源浪费。为了提高检索数据的能力，数据库引入了索引机制。 </p>
<h3 id="聚集引索"><a href="#聚集引索" class="headerlink" title="聚集引索"></a>聚集引索</h3><p><strong>·聚集索引对表的物理数据页中的数据按列进行排序，然后再重新存储到磁盘上，即聚集索引与数据是混为一体，的它的叶节点中存储的是实际的数据。</strong></p>
<p><strong>·由于聚集索引对表中的数据一一进行了排序，因此用聚集索引查找数据很快。但由于聚集索引将表的所有数据完全重新排列了，它所需要的空间也就特别大，大概相当于表中数据所占空间的<code>120%</code>。</strong></p>
<p><strong>·一个表只能有一个聚集索引。</strong></p>
<p><strong>·聚集索引改变表中数据的物理顺序</strong> </p>
<h3 id="非聚集引索"><a href="#非聚集引索" class="headerlink" title="非聚集引索"></a>非聚集引索</h3><p><strong>·非聚集索引具有与表的数据完全分离的结构，使用非聚集索引不用将物理数据页中的数据按列排序。</strong></p>
<p><strong>·理论上讲，一个表最多可以建249 个非聚集索引。</strong></p>
<p><strong>·非聚集索引不改变表中数据的物理顺序 。</strong></p>
<h3 id="创建索引"><a href="#创建索引" class="headerlink" title="创建索引"></a>创建索引</h3><p>假如有用以下命令创建的表</p>
<div class="code-wrapper"><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> Staff<span class="token punctuation">(</span>
	names <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	sex <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">check</span><span class="token punctuation">(</span>sex <span class="token operator">in</span><span class="token punctuation">(</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token string">'女'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	id <span class="token keyword">int</span> <span class="token keyword">unique</span><span class="token punctuation">,</span>
	salary <span class="token keyword">float</span><span class="token punctuation">,</span>
	insurance <span class="token keyword">float</span><span class="token punctuation">,</span>
	dress <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span></code></pre></div>

<h4 id="1聚集索引"><a href="#1聚集索引" class="headerlink" title="1聚集索引"></a>1聚集索引</h4><div class="code-wrapper"><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">unique</span> <span class="token keyword">clustered</span> <span class="token keyword">index</span> id_Staff <span class="token keyword">on</span> Staff<span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token comment">--id_Staff 为索引名</span></code></pre></div>

<h4 id="2非聚集索引"><a href="#2非聚集索引" class="headerlink" title="2非聚集索引"></a>2非聚集索引</h4><p>由于可以创建多个非聚集索引，且非聚集索引与聚集所以你不冲突，所以可以同时在<code>salary</code> 和<code>insurance</code> 上建立非聚集索引，也可以建立复合索引。</p>
<div class="code-wrapper"><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">index</span> salary_staff <span class="token keyword">on</span> Staff<span class="token punctuation">(</span>salary<span class="token punctuation">)</span>
<span class="token keyword">create</span> <span class="token keyword">index</span> insurance_staff <span class="token keyword">on</span> Staff<span class="token punctuation">(</span>insurance<span class="token punctuation">)</span>
<span class="token keyword">create</span> <span class="token keyword">index</span> saAndins <span class="token keyword">on</span> Staff<span class="token punctuation">(</span>salary<span class="token punctuation">,</span>insurance<span class="token punctuation">)</span> <span class="token comment">--复合索引</span></code></pre></div>

<p>注意：数据类型为TEXT、NTEXT、IMAGE或BIT的列不能作为索引的列。 由于索引的宽度不能超过900个字节，因此数据类型为CHAR、VARCHAR、BINARY和VARBINARY的列的列宽度超过了900字节，或数据类型为NCHAR、NVARCHAR的列的列宽度超过了450个字节时也不能作为索引的列。</p>
<blockquote>
<p><del><code>未完待续...</code></del> <code>完结</code> 下篇请见<a href="/2021/10/14/SQL/SQL%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/">SQL 基础语法</a>)</p>
</blockquote>

              
            </div>
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E5%AD%A6%E4%B9%A0/" class="category-chain-item">学习</a>
  
  
    <span>></span>
    
  <a href="/categories/%E5%AD%A6%E4%B9%A0/%E7%AC%94%E8%AE%B0/" class="category-chain-item">笔记</a>
  
  

  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/SQL/">#SQL</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>SQL services基础</div>
      <div>https://dbin.top/2021/09/27/SQL/SQL基础/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>落花生</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2021年9月27日</div>
        </div>
      
      
      <div class="license-meta-item">
        <div>许可协议</div>
        <div>
          
            
            
              <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
              <span class="hint--top hint--rounded" aria-label="BY - 署名">
                <i class="iconfont icon-by"></i>
              </span>
              </a>
            
          
        </div>
      </div>
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2021/10/02/%E5%BC%80%E5%8F%91/Android/Android/" title="Android学习笔记">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Android学习笔记</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2021/09/15/java/%E5%9C%A8java%E4%B8%AD%E4%BD%BF%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" title="在java中使用正则表达式、">
                        <span class="hidden-mobile">在java中使用正则表达式、</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            

          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  






    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="leancloud-site-pv-container" style="display: none">
        总访问量 
        <span id="leancloud-site-pv"></span>
         次
      </span>
    
    
      <span id="leancloud-site-uv-container" style="display: none">
        总访客数 
        <span id="leancloud-site-uv"></span>
         人
      </span>
    
    

  
</div>

  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  

  

  

  

  

  

  
    
  




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.0/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script>
  (function() {
    var enableLang = CONFIG.code_language.enable && CONFIG.code_language.default;
    var enableCopy = CONFIG.copy_btn;
    if (!enableLang && !enableCopy) {
      return;
    }

    function getBgClass(ele) {
      return Fluid.utils.getBackgroundLightness(ele) >= 0 ? 'code-widget-light' : 'code-widget-dark';
    }

    var copyTmpl = '';
    copyTmpl += '<div class="code-widget">';
    copyTmpl += 'LANG';
    copyTmpl += '</div>';
    jQuery('.markdown-body pre').each(function() {
      var $pre = jQuery(this);
      if ($pre.find('code.mermaid').length > 0) {
        return;
      }
      if ($pre.find('span.line').length > 0) {
        return;
      }

      var lang = '';

      if (enableLang) {
        lang = CONFIG.code_language.default;
        if ($pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2 && $pre.children().hasClass('hljs')) {
          lang = $pre[0].children[0].classList[1];
        } else if ($pre[0].getAttribute('data-language')) {
          lang = $pre[0].getAttribute('data-language');
        } else if ($pre.parent().hasClass('sourceCode') && $pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2) {
          lang = $pre[0].children[0].classList[1];
          $pre.parent().addClass('code-wrapper');
        } else if ($pre.parent().hasClass('markdown-body') && $pre[0].classList.length === 0) {
          $pre.wrap('<div class="code-wrapper"></div>');
        }
        lang = lang.toUpperCase().replace('NONE', CONFIG.code_language.default);
      }
      $pre.append(copyTmpl.replace('LANG', lang).replace('code-widget">',
        getBgClass($pre[0]) + (enableCopy ? ' code-widget copy-btn" data-clipboard-snippet><i class="iconfont icon-copy"></i>' : ' code-widget">')));

      if (enableCopy) {
        Fluid.utils.createScript('https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js', function() {
          var clipboard = new window.ClipboardJS('.copy-btn', {
            target: function(trigger) {
              var nodes = trigger.parentNode.childNodes;
              for (var i = 0; i < nodes.length; i++) {
                if (nodes[i].tagName === 'CODE') {
                  return nodes[i];
                }
              }
            }
          });
          clipboard.on('success', function(e) {
            e.clearSelection();
            e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-copy', 'icon-success');
            setTimeout(function() {
              e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-success', 'icon-copy');
            }, 2000);
          });
        });
      }
    });
  })();
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="/js/leancloud.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
